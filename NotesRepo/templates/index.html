{% extends "base.html" %}
{% import "macros.html" as macros with context %}

{% block body %}
<title>Notes-Repo</title>
{% if not current_user.is_anonymous %}
<div>
  <a class="btn-custom" onclick="toggleDiv('allFolders')"><i class="bi bi-folder-fill"></i> {{ current_user.get_folders().count() }} folders</a>
  <div id="allFolders" style="display: none" class="mt-3">
      {% for i in current_user.get_folders() %}
      <a href="{{ url_for('folders.folder', id_=i.id) }}" class="font-custom"><i class="bi bi-folder-fill" style="color: {{ i.color }}"> {{ i.get_notes().count() }}</i> {{ i.name }}</a><br>
      {% endfor %}
  </div>
  {{ macros.note_sorter(class='my-3') }}
  <a class="btn-custom" onclick="toggleDiv('noteCreate')"><i class="bi bi-plus-lg"></i> New Note</a>
  <a class="btn-custom" onclick="toggleDiv('folderCreate')"><i class="bi bi-plus-lg"></i> New Folder</a>
  <div id="noteCreate" style="display:none" class="mt-3">{{ macros.note_create_form() }}</div>
  <div id="folderCreate" style="display:none" class="mt-3">{{ macros.folder_create_form() }}</div>
  <div class="row mt-3">
    {% for i in current_user.get_notes(order_by=order_by) %}
    {{ macros.note_card(i) }}
    {% endfor %}
  </div>
</div>
{% else %}
<div class="text-center opacity-25">
  <div class="bi bi-person-fill" style="font-size:5em"></div>
  <span class="h4">
    <a data-bs-toggle="modal" data-bs-target="#login" class="font-custom text-decoration-underline">Log in</a> or
    <a data-bs-toggle="modal" data-bs-target="#signup" class="font-custom text-decoration-underline">sign up</a>
  </span>
</div>
{% endif %}
{% endblock %}

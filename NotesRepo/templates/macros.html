<!--suppress ALL -->
<!--BOXES-->
{% macro modal(modal_id, class='', large=false) %}
<div class="modal {{ class }}" id="{{ modal_id }}">
  <div class="modal-dialog {% if large %}modal-lg{% endif %}">
    <div class="modal-content p-3">
      {{ caller() }}
    </div>
  </div>
</div>
{% endmacro %}

{% macro note_card(note) %}
<div class="card col-xl-4 border-0">
    <div class="card-body mb-4">
        <div class="mb-3">
            <a href="{{ url_for('notes.note', id_=note.id) }}" class="fw-bold">{{ note.title }}</a>
            <a href="{{ url_for('folders.folder', id_=note.folder_id) }}" class="float-end font-custom-2"><i class="bi bi-folder-fill" style="color: {{ note.folders.color }}"></i> {{ note.folders.name or 'unsorted' }}</a>
        </div>
        <div>
            <a href="{{ url_for('notes.editor', id_=note.id) }}" class="bi bi-pen mx-1"></a>
            <a onclick="noteFavorite({{ note.id }})" class="bi bi-star{% if note.favorited %}-fill text-warning{% endif %} mx-1"></a>
            <a href="{{ url_for('notes.note_delete', id_=note.id) }}" class="font-custom text-danger mx-1" id="deleteNote" style="display: none">delete?</a>
            <a onclick="toggleDiv('deleteNote')" class="bi bi-trash3 text-danger mx-1"></a>
        </div>
    </div>
</div>
{% endmacro %}

{% macro link_card(link) %}
<div class="card col-xl-4">
  <div class="card-body text-truncate">
    <a title="{{ link.title }}" target="_blank" class="heading2" href="{{ link.url }}">{{ link.title }}</a><br>
    <a class="btn-custom {% if link.been_read %}bg-success{% else %}bg-warning{% endif %}"
       onclick="toggleRead({{ link.id }})">
      {% if link.been_read %}Read{% else %}Unread{% endif %}
    </a>
    <span class="small d-block mt-2">{{ 'Added %s' % link.date_added.strftime('%B %m, %Y %I:%M %p') }}</span>
    <div class="mt-2">
      <a class="mx-1" onclick="toggleDiv('edit' + {{ link.id }})"><i class="bi bi-pen"></i></a>
      <a class="mx-1" onclick="toggleDiv('delete' + {{ link.id }})"><i class="bi bi-x-circle text-danger"></i></a>
      <a id="delete{{ link.id }}" style="display:none" class="font-custom text-danger" onclick="linkDelete({{ link.id }})">Delete?</a>
      <div class="mt-3" id="edit{{ link.id }}" style="display:none">{{ link_edit_form(link) }}</div>
    </div>
  </div>
</div>
{% endmacro %}


<!--FORMS-->
{% macro login_form() %}
<form method="POST" action="{{ url_for('login') }}">
  <input type="text" class="input-custom w-100 mb-2" autocomplete="off" placeholder="Username" name="username">
  <input type="password" class="input-custom w-100 mb-2" autocomplete="off" placeholder="Password" name="password">
  <button type="submit" class="btn-custom w-100">Log In</button>
</form>
{% endmacro %}

{% macro signup_form() %}
<form method="POST" action="{{ url_for('signup') }}">
  <input autocomplete="off" class="input-custom w-100 mb-2" name="username" placeholder="Username">
  <input autocomplete="off" class="input-custom w-100 mb-2" name="password" placeholder="Password" type="password">
  <button class="btn-custom w-100">Sign Up</button>
</form>
{% endmacro %}

{% macro folder_create_form() %}
<form class="input-group" method="post" action="{{ url_for('folders.folder_create') }}">
  <input autocomplete="off" class="input-custom" placeholder="Name" type="text" name="name">
  <button type="submit" class="btn-custom">Create Folder</button>
</form>
{% endmacro %}

{% macro note_create_form(folder) %}
<form method="POST" action="{{ url_for('notes.note_create') }}" class="input-group">
  <input autocomplete="off" class="input-custom" name="title" placeholder="Title" type="text">
  <select class="input-custom" name="folder_id">
    <option value="">None</option>
    {% for i in current_user.get_folders() %}
    <option value="{{ i.id }}" {% if folder and i.id==folder.id %}selected{% endif %}>{{ i.name }}</option>
    {% endfor %}
  </select>

  <button type="submit" class="btn-custom">create note</button>
</form>
{% endmacro %}

{% macro toolbar() %}
<div style="font-size: 1.5em">
    <a class="bi bi-type-bold btn-custom" onclick="formatText('bold')"></a>
    <a class="bi bi-type-italic btn-custom" onclick="formatText('italic')"></a>
    <a class="bi bi-link-45deg btn-custom" onclick="formatText('link')"></a>
    <a class="bi bi-type-h1 btn-custom" onclick="formatText('heading')"></a>
    <a class="bi bi-text-indent-left btn-custom" onclick="formatText('indent')"></a>
    <a class="bi bi-code-slash btn-custom" onclick="formatText('code')"></a>
</div>
{% endmacro %}

{% macro link_create_form() %}
<form onsubmit="event.preventDefault(); linkCreate(); this.reset();">
  <input autocomplete="off" class="input-custom w-100 mb-2" placeholder="URL" type="url" id="url" onchange="getTitle();">
  <input autocomplete="off" class="input-custom w-100 mb-2" placeholder="Title" type="text" id="title">
  <button class="btn-custom w-100">Add Link</button>
</form>
{% endmacro %}

{% macro link_edit_form(link) %}
<form onsubmit="event.preventDefault(); linkEdit({{ link.id }});">
  <input autocomplete="off" class="input-custom w-100 mb-2" placeholder="URL" type="url" id="url{{ link.id }}" onchange="linkEdit({{ link.id }})" value="{{ link.url }}">
  <input autocomplete="off" class="input-custom w-100 mb-2" placeholder="Title" type="text" id="title{{ link.id }}" onchange="linkEdit({{ link.id }})" value="{{ link.title }}">
  <button class="btn-custom w-100">Edit</button>
</form>
{% endmacro %}

<!--SORTERS-->

{% macro note_sorter(class='') %}
<div class="{{ class }}">
  <span class="font-custom py-2">Sort: </span>
  {% if order_by != 'last_modified desc' %}<a class="btn-custom" href="{{ url_for('index', order_by='last_modified desc') }}">Last Modified</a>{% endif %}
  {% if order_by != 'date_created desc' %}<a class="btn-custom" href="{{ url_for('index', order_by='date_created desc') }}">Date Created</a>{% endif %}
</div>
{% endmacro %}